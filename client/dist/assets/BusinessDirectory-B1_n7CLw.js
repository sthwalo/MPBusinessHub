import{j as r}from"./index-BTjPMemu.js";import{L as re,e as me,r as M}from"./vendor-BMRKNa3Q.js";import{P as k}from"./index-D7k8otYo.js";import{F as xe,a as pe,b as be,c as ye,d as je,e as ve}from"./index.esm-CZ6LTzpv.js";import"./ui-BuAqC3bd.js";import"./sentry-CdN5cWpD.js";function $(t){return Array.isArray?Array.isArray(t):ae(t)==="[object Array]"}function we(t){if(typeof t=="string")return t;let e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Ne(t){return t==null?"":we(t)}function I(t){return typeof t=="string"}function ne(t){return typeof t=="number"}function ke(t){return t===!0||t===!1||Me(t)&&ae(t)=="[object Boolean]"}function ie(t){return typeof t=="object"}function Me(t){return ie(t)&&t!==null}function S(t){return t!=null}function V(t){return!t.trim().length}function ae(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(t)}const Se="Incorrect 'index' type",_e=t=>`Invalid value for key ${t}`,Ee=t=>`Pattern length exceeds max of ${t}.`,Le=t=>`Missing ${t} property in key`,Ie=t=>`Property 'weight' in key '${t}' must be a positive integer`,Z=Object.prototype.hasOwnProperty;class Ae{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(n=>{let i=ce(n);s+=i.weight,this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(n=>{n.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ce(t){let e=null,s=null,n=null,i=1,a=null;if(I(t)||$(t))n=t,e=q(t),s=K(t);else{if(!Z.call(t,"name"))throw new Error(Le("name"));const o=t.name;if(n=o,Z.call(t,"weight")&&(i=t.weight,i<=0))throw new Error(Ie(o));e=q(o),s=K(o),a=t.getFn}return{path:e,id:s,weight:i,src:n,getFn:a}}function q(t){return $(t)?t:t.split(".")}function K(t){return $(t)?t.join("."):t}function Ce(t,e){let s=[],n=!1;const i=(a,o,l)=>{if(S(a))if(!o[l])s.push(a);else{let c=o[l];const d=a[c];if(!S(d))return;if(l===o.length-1&&(I(d)||ne(d)||ke(d)))s.push(Ne(d));else if($(d)){n=!0;for(let h=0,m=d.length;h<m;h+=1)i(d[h],o,l+1)}else o.length&&i(d,o,l+1)}};return i(t,I(e)?e.split("."):e,0),n?s:s[0]}const Re={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},$e={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(t,e)=>t.score===e.score?t.idx<e.idx?-1:1:t.score<e.score?-1:1},Fe={location:0,threshold:.6,distance:100},Oe={useExtendedSearch:!1,getFn:Ce,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var g={...$e,...Re,...Fe,...Oe};const Be=/[^ ]+/g;function Te(t=1,e=3){const s=new Map,n=Math.pow(10,e);return{get(i){const a=i.match(Be).length;if(s.has(a))return s.get(a);const o=1/Math.pow(a,.5*t),l=parseFloat(Math.round(o*n)/n);return s.set(a,l),l},clear(){s.clear()}}}class Q{constructor({getFn:e=g.getFn,fieldNormWeight:s=g.fieldNormWeight}={}){this.norm=Te(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,I(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();I(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!S(e)||V(e))return;let n={v:e,i:s,n:this.norm.get(e)};this.records.push(n)}_addObject(e,s){let n={i:s,$:{}};this.keys.forEach((i,a)=>{let o=i.getFn?i.getFn(e):this.getFn(e,i.path);if(S(o)){if($(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:h}=c.pop();if(S(h))if(I(h)&&!V(h)){let m={v:h,i:d,n:this.norm.get(h)};l.push(m)}else $(h)&&h.forEach((m,f)=>{c.push({nestedArrIndex:f,value:m})})}n.$[a]=l}else if(I(o)&&!V(o)){let l={v:o,n:this.norm.get(o)};n.$[a]=l}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function oe(t,e,{getFn:s=g.getFn,fieldNormWeight:n=g.fieldNormWeight}={}){const i=new Q({getFn:s,fieldNormWeight:n});return i.setKeys(t.map(ce)),i.setSources(e),i.create(),i}function Pe(t,{getFn:e=g.getFn,fieldNormWeight:s=g.fieldNormWeight}={}){const{keys:n,records:i}=t,a=new Q({getFn:e,fieldNormWeight:s});return a.setKeys(n),a.setIndexRecords(i),a}function z(t,{errors:e=0,currentLocation:s=0,expectedLocation:n=0,distance:i=g.distance,ignoreLocation:a=g.ignoreLocation}={}){const o=e/t.length;if(a)return o;const l=Math.abs(n-s);return i?o+l/i:l?1:o}function ze(t=[],e=g.minMatchCharLength){let s=[],n=-1,i=-1,a=0;for(let o=t.length;a<o;a+=1){let l=t[a];l&&n===-1?n=a:!l&&n!==-1&&(i=a-1,i-n+1>=e&&s.push([n,i]),n=-1)}return t[a-1]&&a-n>=e&&s.push([n,a-1]),s}const O=32;function We(t,e,s,{location:n=g.location,distance:i=g.distance,threshold:a=g.threshold,findAllMatches:o=g.findAllMatches,minMatchCharLength:l=g.minMatchCharLength,includeMatches:c=g.includeMatches,ignoreLocation:d=g.ignoreLocation}={}){if(e.length>O)throw new Error(Ee(O));const h=e.length,m=t.length,f=Math.max(0,Math.min(n,m));let p=a,u=f;const j=l>1||c,A=j?Array(m):[];let E;for(;(E=t.indexOf(e,u))>-1;){let w=z(e,{currentLocation:E,expectedLocation:f,distance:i,ignoreLocation:d});if(p=Math.min(w,p),u=E+h,j){let L=0;for(;L<h;)A[E+L]=1,L+=1}}u=-1;let C=[],R=1,B=h+m;const D=1<<h-1;for(let w=0;w<h;w+=1){let L=0,_=B;for(;L<_;)z(e,{errors:w,currentLocation:f+_,expectedLocation:f,distance:i,ignoreLocation:d})<=p?L=_:B=_,_=Math.floor((B-L)/2+L);B=_;let x=Math.max(1,f-_+1),b=o?m:Math.min(f+_,m)+h,v=Array(b+2);v[b+1]=(1<<w)-1;for(let N=b;N>=x;N-=1){let y=N-1,X=s[t.charAt(y)];if(j&&(A[y]=+!!X),v[N]=(v[N+1]<<1|1)&X,w&&(v[N]|=(C[N+1]|C[N])<<1|1|C[N+1]),v[N]&D&&(R=z(e,{errors:w,currentLocation:y,expectedLocation:f,distance:i,ignoreLocation:d}),R<=p)){if(p=R,u=y,u<=f)break;x=Math.max(1,2*f-u)}}if(z(e,{errors:w+1,currentLocation:f,expectedLocation:f,distance:i,ignoreLocation:d})>p)break;C=v}const P={isMatch:u>=0,score:Math.max(.001,R)};if(j){const w=ze(A,l);w.length?c&&(P.indices=w):P.isMatch=!1}return P}function De(t){let e={};for(let s=0,n=t.length;s<n;s+=1){const i=t.charAt(s);e[i]=(e[i]||0)|1<<n-s-1}return e}class le{constructor(e,{location:s=g.location,threshold:n=g.threshold,distance:i=g.distance,includeMatches:a=g.includeMatches,findAllMatches:o=g.findAllMatches,minMatchCharLength:l=g.minMatchCharLength,isCaseSensitive:c=g.isCaseSensitive,ignoreLocation:d=g.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:i,includeMatches:a,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:d},this.pattern=c?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const h=(f,p)=>{this.chunks.push({pattern:f,alphabet:De(f),startIndex:p})},m=this.pattern.length;if(m>O){let f=0;const p=m%O,u=m-p;for(;f<u;)h(this.pattern.substr(f,O),f),f+=O;if(p){const j=m-O;h(this.pattern.substr(j),j)}}else h(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:n}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let u={isMatch:!0,score:0};return n&&(u.indices=[[0,e.length-1]]),u}const{location:i,distance:a,threshold:o,findAllMatches:l,minMatchCharLength:c,ignoreLocation:d}=this.options;let h=[],m=0,f=!1;this.chunks.forEach(({pattern:u,alphabet:j,startIndex:A})=>{const{isMatch:E,score:C,indices:R}=We(e,u,j,{location:i+A,distance:a,threshold:o,findAllMatches:l,minMatchCharLength:c,includeMatches:n,ignoreLocation:d});E&&(f=!0),m+=C,E&&R&&(h=[...h,...R])});let p={isMatch:f,score:f?m/this.chunks.length:1};return f&&n&&(p.indices=h),p}}class F{constructor(e){this.pattern=e}static isMultiMatch(e){return ee(e,this.multiRegex)}static isSingleMatch(e){return ee(e,this.singleRegex)}search(){}}function ee(t,e){const s=t.match(e);return s?s[1]:null}class Ve extends F{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Ke extends F{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const n=e.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,e.length-1]}}}class He extends F{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Ge extends F{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class Ye extends F{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class Ue extends F{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class he extends F{constructor(e,{location:s=g.location,threshold:n=g.threshold,distance:i=g.distance,includeMatches:a=g.includeMatches,findAllMatches:o=g.findAllMatches,minMatchCharLength:l=g.minMatchCharLength,isCaseSensitive:c=g.isCaseSensitive,ignoreLocation:d=g.ignoreLocation}={}){super(e),this._bitapSearch=new le(e,{location:s,threshold:n,distance:i,includeMatches:a,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:d})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class de extends F{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,n;const i=[],a=this.pattern.length;for(;(n=e.indexOf(this.pattern,s))>-1;)s=n+a,i.push([n,s-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const H=[Ve,de,He,Ge,Ue,Ye,Ke,he],te=H.length,Je=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Qe="|";function Xe(t,e={}){return t.split(Qe).map(s=>{let n=s.trim().split(Je).filter(a=>a&&!!a.trim()),i=[];for(let a=0,o=n.length;a<o;a+=1){const l=n[a];let c=!1,d=-1;for(;!c&&++d<te;){const h=H[d];let m=h.isMultiMatch(l);m&&(i.push(new h(m,e)),c=!0)}if(!c)for(d=-1;++d<te;){const h=H[d];let m=h.isSingleMatch(l);if(m){i.push(new h(m,e));break}}}return i})}const Ze=new Set([he.type,de.type]);class qe{constructor(e,{isCaseSensitive:s=g.isCaseSensitive,includeMatches:n=g.includeMatches,minMatchCharLength:i=g.minMatchCharLength,ignoreLocation:a=g.ignoreLocation,findAllMatches:o=g.findAllMatches,location:l=g.location,threshold:c=g.threshold,distance:d=g.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:a,location:l,threshold:c,distance:d},this.pattern=s?e:e.toLowerCase(),this.query=Xe(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let a=0,o=[],l=0;for(let c=0,d=s.length;c<d;c+=1){const h=s[c];o.length=0,a=0;for(let m=0,f=h.length;m<f;m+=1){const p=h[m],{isMatch:u,indices:j,score:A}=p.search(e);if(u){if(a+=1,l+=A,n){const E=p.constructor.type;Ze.has(E)?o=[...o,...j]:o.push(j)}}else{l=0,a=0,o.length=0;break}}if(a){let m={isMatch:!0,score:l/a};return n&&(m.indices=o),m}}return{isMatch:!1,score:1}}}const G=[];function et(...t){G.push(...t)}function Y(t,e){for(let s=0,n=G.length;s<n;s+=1){let i=G[s];if(i.condition(t,e))return new i(t,e)}return new le(t,e)}const W={AND:"$and",OR:"$or"},U={PATH:"$path",PATTERN:"$val"},J=t=>!!(t[W.AND]||t[W.OR]),tt=t=>!!t[U.PATH],st=t=>!$(t)&&ie(t)&&!J(t),se=t=>({[W.AND]:Object.keys(t).map(e=>({[e]:t[e]}))});function ue(t,e,{auto:s=!0}={}){const n=i=>{let a=Object.keys(i);const o=tt(i);if(!o&&a.length>1&&!J(i))return n(se(i));if(st(i)){const c=o?i[U.PATH]:a[0],d=o?i[U.PATTERN]:i[c];if(!I(d))throw new Error(_e(c));const h={keyId:K(c),pattern:d};return s&&(h.searcher=Y(d,e)),h}let l={children:[],operator:a[0]};return a.forEach(c=>{const d=i[c];$(d)&&d.forEach(h=>{l.children.push(n(h))})}),l};return J(t)||(t=se(t)),n(t)}function rt(t,{ignoreFieldNorm:e=g.ignoreFieldNorm}){t.forEach(s=>{let n=1;s.matches.forEach(({key:i,norm:a,score:o})=>{const l=i?i.weight:null;n*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(e?1:a))}),s.score=n})}function nt(t,e){const s=t.matches;e.matches=[],S(s)&&s.forEach(n=>{if(!S(n.indices)||!n.indices.length)return;const{indices:i,value:a}=n;let o={indices:i,value:a};n.key&&(o.key=n.key.src),n.idx>-1&&(o.refIndex=n.idx),e.matches.push(o)})}function it(t,e){e.score=t.score}function at(t,e,{includeMatches:s=g.includeMatches,includeScore:n=g.includeScore}={}){const i=[];return s&&i.push(nt),n&&i.push(it),t.map(a=>{const{idx:o}=a,l={item:e[o],refIndex:o};return i.length&&i.forEach(c=>{c(a,l)}),l})}class T{constructor(e,s={},n){this.options={...g,...s},this.options.useExtendedSearch,this._keyStore=new Ae(this.options.keys),this.setCollection(e,n)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof Q))throw new Error(Se);this._myIndex=s||oe(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){S(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let n=0,i=this._docs.length;n<i;n+=1){const a=this._docs[n];e(a,n)&&(this.removeAt(n),n-=1,i-=1,s.push(a))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:a,sortFn:o,ignoreFieldNorm:l}=this.options;let c=I(e)?I(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return rt(c,{ignoreFieldNorm:l}),a&&c.sort(o),ne(s)&&s>-1&&(c=c.slice(0,s)),at(c,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const s=Y(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:a,i:o,n:l})=>{if(!S(a))return;const{isMatch:c,score:d,indices:h}=s.searchIn(a);c&&i.push({item:a,idx:o,matches:[{score:d,value:a,norm:l,indices:h}]})}),i}_searchLogical(e){const s=ue(e,this.options),n=(l,c,d)=>{if(!l.children){const{keyId:m,searcher:f}=l,p=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:f});return p&&p.length?[{idx:d,item:c,matches:p}]:[]}const h=[];for(let m=0,f=l.children.length;m<f;m+=1){const p=l.children[m],u=n(p,c,d);if(u.length)h.push(...u);else if(l.operator===W.AND)return[]}return h},i=this._myIndex.records,a={},o=[];return i.forEach(({$:l,i:c})=>{if(S(l)){let d=n(s,l,c);d.length&&(a[c]||(a[c]={idx:c,item:l,matches:[]},o.push(a[c])),d.forEach(({matches:h})=>{a[c].matches.push(...h)}))}}),o}_searchObjectList(e){const s=Y(e,this.options),{keys:n,records:i}=this._myIndex,a=[];return i.forEach(({$:o,i:l})=>{if(!S(o))return;let c=[];n.forEach((d,h)=>{c.push(...this._findMatches({key:d,value:o[h],searcher:s}))}),c.length&&a.push({idx:l,item:o,matches:c})}),a}_findMatches({key:e,value:s,searcher:n}){if(!S(s))return[];let i=[];if($(s))s.forEach(({v:a,i:o,n:l})=>{if(!S(a))return;const{isMatch:c,score:d,indices:h}=n.searchIn(a);c&&i.push({score:d,key:e,value:a,idx:o,norm:l,indices:h})});else{const{v:a,n:o}=s,{isMatch:l,score:c,indices:d}=n.searchIn(a);l&&i.push({score:c,key:e,value:a,norm:o,indices:d})}return i}}T.version="6.6.2";T.createIndex=oe;T.parseIndex=Pe;T.config=g;T.parseQuery=ue;et(qe);function fe({business:t}){console.log("BusinessCard props:",t);const{id:e,name:s,category:n,district:i,package_type:a,rating:o,description:l,contact:c,image_url:d}=t,h={Gold:"bg-brand-gray-200 text-brand-black",Silver:"bg-brand-gray-300 text-brand-black",Bronze:"bg-brand-gray-500 text-brand-white",Basic:"bg-brand-gray-700 text-brand-white"},m=()=>a==="Basic"?null:r.jsxs("div",{className:"mt-4 pt-4 border-t border-brand-gray-200",children:[(c==null?void 0:c.phone)&&r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("svg",{className:"h-5 w-5 text-brand-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),r.jsx("a",{href:`tel:${c.phone}`,className:"text-brand-gray-600 hover:text-brand-black transition-colors",children:c.phone})]}),(c==null?void 0:c.email)&&r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("svg",{className:"h-5 w-5 text-brand-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsx("a",{href:`mailto:${c.email}`,className:"text-brand-gray-600 hover:text-brand-black transition-colors",children:c.email})]}),(c==null?void 0:c.website)&&r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"h-5 w-5 text-brand-gray-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9a9 9 0 01-9-9m9 9c1.657 0 3-4.03 3-9s-1.343-9-3-9m0 18c-1.657 0-3-4.03-3-9s1.343-9 3-9m-9 9a9 9 0 019-9"})}),r.jsx("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",className:"text-brand-gray-600 hover:text-brand-black transition-colors truncate",children:c.website.replace(/(^https?:\/\/|\/$)/g,"")})]})]}),f=()=>{if(!c||!c.social_media||a==="Basic")return null;const{social_media:u}=c;return r.jsxs("div",{className:"social-icons flex space-x-2 mt-2",children:[(u==null?void 0:u.facebook)&&r.jsx("a",{href:u.facebook,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:r.jsx(xe,{size:16})}),(u==null?void 0:u.instagram)&&r.jsx("a",{href:u.instagram,target:"_blank",rel:"noopener noreferrer",className:"text-pink-600 hover:text-pink-800",children:r.jsx(pe,{size:16})}),(u==null?void 0:u.twitter)&&r.jsx("a",{href:u.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-600",children:r.jsx(be,{size:16})}),(u==null?void 0:u.linkedin)&&r.jsx("a",{href:u.linkedin,target:"_blank",rel:"noopener noreferrer",className:"text-blue-700 hover:text-blue-900",children:r.jsx(ye,{size:16})}),(u==null?void 0:u.youtube)&&r.jsx("a",{href:u.youtube,target:"_blank",rel:"noopener noreferrer",className:"text-red-600 hover:text-red-800",children:r.jsx(je,{size:16})}),(u==null?void 0:u.tiktok)&&r.jsx("a",{href:u.tiktok,target:"_blank",rel:"noopener noreferrer",className:"text-black hover:text-gray-700",children:r.jsx(ve,{size:16})})]})},p=()=>a==="Basic"?null:r.jsxs("div",{className:"premium-features mt-3",children:[(c==null?void 0:c.website)&&r.jsxs("a",{href:c.website,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center mr-3 text-sm text-brand-gray-600 hover:text-brand-black transition-colors",children:[r.jsxs("svg",{className:"h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:[r.jsx("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),r.jsx("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})]}),"Website"]}),(c==null?void 0:c.whatsapp)&&r.jsxs("a",{href:`https://wa.me/${c.whatsapp.replace(/[^0-9]/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-brand-gray-600 hover:text-brand-black transition-colors",children:[r.jsxs("svg",{className:"h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347z"}),r.jsx("path",{d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-18.5c-4.694 0-8.5 3.806-8.5 8.5s3.806 8.5 8.5 8.5 8.5-3.806 8.5-8.5S16.694 3.5 12 3.5z"})]}),"WhatsApp"]})]});return r.jsxs("div",{className:"rounded-lg overflow-hidden shadow-brand-md hover:shadow-brand-lg transition-all duration-300 border border-brand-gray-200",children:[r.jsxs("div",{className:"relative h-48 bg-brand-gray-200",children:[d?r.jsx("img",{src:d.startsWith("http")?d:`http://localhost:8000${d}`,alt:s,className:"w-full h-full object-contain bg-white"}):r.jsx("div",{className:"flex items-center justify-center h-full bg-brand-gray-100",children:r.jsx("svg",{className:"h-12 w-12 text-brand-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("div",{className:`absolute top-2 right-2 px-2 py-1 rounded text-xs font-medium ${h[a]||h.Basic}`,children:a}),r.jsx("div",{className:"absolute bottom-2 left-2 px-2 py-1 rounded text-xs font-medium bg-brand-black text-brand-white",children:n})]}),r.jsxs("div",{className:"p-5",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsx("h3",{className:"font-bold text-xl font-serif text-brand-black",children:s}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"h-5 w-5 text-brand-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),r.jsx("span",{className:"ml-1 text-sm font-semibold text-brand-gray-800",children:o?typeof o=="number"?o.toFixed(1):parseFloat(o).toFixed(1):"N/A"})]})]}),r.jsx("div",{className:"text-sm text-brand-gray-500 mb-2",children:i}),r.jsx("p",{className:"text-brand-gray-600 line-clamp-2 mb-2",children:l}),p(),f(),r.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[r.jsx(re,{to:`/business/${e}`,className:"text-brand-black hover:text-brand-gray-700 transition-colors font-medium",children:"View Details"}),a==="Gold"&&r.jsx("span",{className:"text-xs bg-brand-gray-200 px-2 py-1 rounded font-medium text-brand-black",children:"Featured"})]}),m()]})]})}fe.propTypes={business:k.shape({id:k.oneOfType([k.string,k.number]).isRequired,name:k.string.isRequired,category:k.string.isRequired,district:k.string,package_type:k.string.isRequired,rating:k.oneOfType([k.string,k.number]),description:k.string,contact:k.object,image_url:k.string}).isRequired};function ft(){const[t,e]=me(),[s,n]=M.useState([]),[i,a]=M.useState(!0),[o,l]=M.useState(null),[c,d]=M.useState(t.get("search")||""),[h,m]=M.useState(t.get("category")||""),[f,p]=M.useState(t.get("district")||""),[u,j]=M.useState([]),[A,E]=M.useState(!1),[C,R]=M.useState([]),B=["Tourism","Agriculture","Construction","Events"],D=["Mbombela","Emalahleni","Bushbuckridge"];M.useEffect(()=>{(async()=>{try{a(!0);const b=new URLSearchParams;h&&b.append("category",h),f&&b.append("district",f);const v=await fetch("/api/businesses/check");if(!v.ok)throw new Error(`API request failed with status ${v.status}`);const N=(await v.json()).businesses.map(y=>({id:y.id,name:y.name,category:y.category,district:y.district,description:y.description,package_type:y.package_type,rating:y.rating,review_count:y.review_count,contact:{phone:y.phone,email:y.user?y.user.email:null,website:y.website,address:y.address},image_url:y.image_url}));n(N),j(N)}catch(b){console.error("Error fetching businesses:",b),l(b.message)}finally{a(!1)}})()},[h,f]),M.useEffect(()=>{(async()=>{try{const b=await fetch("/api/adverts/active");if(!b.ok)throw new Error(`API request failed with status ${b.status}`);const v=await b.json();v.status==="success"&&v.data&&R(v.data)}catch(b){console.error("Error fetching active adverts:",b)}})()},[]),M.useEffect(()=>{const x=new URLSearchParams;c&&x.set("search",c),h&&x.set("category",h),f&&x.set("district",f),e(x)},[c,h,f,e]),M.useEffect(()=>{if(c){const b=new T(s,{keys:["name","description","category"],threshold:.4}).search(c).map(v=>v.item);j(b)}else{let x=[...s];h&&(x=x.filter(b=>b.category===h)),f&&(x=x.filter(b=>b.district===f)),j(x)}},[c,s,h,f]);const P=x=>{d(x.target.value)},w=x=>{m(x===h?"":x)},L=x=>{p(x===f?"":x)},_=()=>{d(""),m(""),p("")};return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Business Directory"}),r.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"search",className:"sr-only",children:"Search businesses"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),r.jsx("input",{type:"text",id:"search",className:"form-control pl-10",placeholder:"Search by business name or description",value:c,onChange:P})]})]}),A&&r.jsx("pre",{style:{whiteSpace:"pre-wrap",backgroundColor:"#f0f0f0",padding:"1rem",borderRadius:"4px",overflow:"auto"},children:JSON.stringify({businesses:s.length,filtered:u.length,error:o,loading:i,searchTerm:c,selectedCategory:h,selectedDistrict:f},null,2)}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Categories"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:B.map(x=>r.jsx("button",{className:`px-4 py-2 rounded-full text-sm ${h===x?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,onClick:()=>w(x),children:x},x))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Districts"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:D.map(x=>r.jsx("button",{className:`px-4 py-2 rounded-full text-sm ${f===x?"bg-blue-600 text-white":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,onClick:()=>L(x),children:x},x))})]})]}),(c||h||f)&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("span",{className:"font-medium",children:u.length})," businesses found"]}),r.jsx("button",{className:"text-sm text-red-600 hover:text-red-800 font-medium",onClick:_,children:"Clear all filters"})]})]}),C.length>0&&r.jsxs("div",{className:"mb-10",children:[r.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Featured Businesses"}),r.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.map(x=>{var b;return r.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden border-2 border-blue-400",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h3",{className:"font-bold text-xl",children:x.title}),r.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded",children:"Sponsored"})]}),r.jsx("p",{className:"text-gray-600 mt-2",children:x.description}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:(b=x.business)==null?void 0:b.name}),r.jsx(re,{to:`/business/${x.business_id}`,className:"mt-2 inline-block text-blue-600 hover:text-blue-800",children:"View Business â†’"})]})]})},x.id)})})})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i?Array.from({length:6}).map((x,b)=>r.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden animate-pulse",children:[r.jsx("div",{className:"h-48 bg-gray-200"}),r.jsxs("div",{className:"p-4",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-2/3"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/2"})]})]},b)):o?r.jsxs("div",{className:"col-span-3 text-center py-8",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("h3",{className:"mt-2 text-lg font-medium text-red-800",children:o}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Using mock data instead. In production, this would connect to the backend API."})]}):u.length===0?r.jsxs("div",{className:"col-span-3 text-center py-8",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No businesses found"}),r.jsx("p",{className:"mt-1 text-gray-500",children:"Try adjusting your search or filter criteria"}),r.jsx("button",{className:"mt-4 text-blue-600 hover:text-blue-800 font-medium",onClick:_,children:"Clear all filters"})]}):u.map(x=>r.jsx(fe,{business:x},x.id))})]})}export{ft as default};
