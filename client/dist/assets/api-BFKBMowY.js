import{a as s}from"./index-t--hEgTQ.js";const o=s.create({baseURL:"/api",timeout:1e4,headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},transformResponse:[function(r){try{return JSON.parse(r)}catch{return r}}]});o.interceptors.request.use(r=>{const t=localStorage.getItem("mpbh_token");return t&&(r.headers.Authorization=`Bearer ${t}`),r},r=>Promise.reject(r));o.interceptors.response.use(r=>{if(typeof r.data=="string"&&(r.data.startsWith("<!DOCTYPE")||r.data.startsWith("<br />")||r.data.startsWith("<html")))throw{response:{status:500,data:{message:"Server returned HTML instead of JSON",htmlError:r.data}}};return r.data},r=>{if(!r.response)return Promise.reject({status:0,message:"Network Error - Unable to connect to server",originalError:r});const{status:t,data:e}=r.response;return t===401&&(localStorage.removeItem("mpbh_token"),localStorage.removeItem("mpbh_user")),typeof e=="string"&&(e.startsWith("<")||e.includes("</html>"))?Promise.reject({status:t,message:"Server returned an HTML error page",htmlError:e,originalError:r}):Promise.reject({status:t,message:(e==null?void 0:e.message)||r.message||`Request failed with status ${t}`,errors:e==null?void 0:e.errors,originalError:r})});const c={getAll:async()=>{try{return await o.get("/adverts")}catch(r){throw console.error("Error fetching adverts:",r),r}},create:async r=>{try{return await o.post("/adverts",r)}catch(t){throw console.error("Error creating advert:",t),t}},delete:async r=>{try{return await o.delete(`/adverts/${r}`)}catch(t){throw console.error("Error deleting advert:",t),t}}},n={getAll:async()=>{try{return await o.get("/products")}catch(r){throw console.error("Error fetching products:",r),r}},getForBusiness:async r=>{try{return await o.get(`/businesses/${r}/products`)}catch(t){throw console.error("Error fetching business products:",t),t}},create:async r=>{try{return await o.post("/products",r)}catch(t){throw console.error("Error creating product:",t),t}},get:async r=>{try{return await o.get(`/products/${r}`)}catch(t){throw console.error("Error fetching product:",t),t}},update:async(r,t)=>{try{return await o.put(`/products/${r}`,t)}catch(e){throw console.error("Error updating product:",e),e}},delete:async r=>{try{return await o.delete(`/products/${r}`)}catch(t){throw console.error("Error deleting product:",t),t}}};export{c as a,n as p};
