import{j as e}from"./index-BTjPMemu.js";import{r as o,L as c}from"./vendor-BMRKNa3Q.js";import{V as i}from"./ui-BuAqC3bd.js";import"./api-BFKBMowY.js";import"./sentry-CdN5cWpD.js";import"./index-t--hEgTQ.js";function S(){const[t,u]=o.useState(""),[r,n]=o.useState({}),[l,m]=o.useState(!1),[x,b]=o.useState(!1),h=s=>{u(s.target.value),r.email&&n({})},p=()=>{const s={};return t?/\S+@\S+\.\S+/.test(t)||(s.email="Email is invalid"):s.email="Email is required",n(s),Object.keys(s).length===0},g=async s=>{if(s.preventDefault(),!!p()){m(!0);try{const a=i.loading("Sending reset link...");await fetch("/api/password/email",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:t})}).then(async d=>{if(i.dismiss(a),!d.ok){const f=await d.json();throw new Error(f.message||"Failed to send reset link")}return d.json()}),i.success("Password reset link sent to your email"),b(!0)}catch(a){console.error("Password reset error:",a),a.response&&a.response.status===422?n({email:"Email address not found"}):n({form:a.message||"Failed to send reset link. Please try again."}),i.error("Failed to send reset link")}finally{m(!1)}}};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-md mx-auto bg-brand-white rounded-lg shadow-md border border-brand-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Reset Your Password"}),x?e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"bg-green-50 text-green-800 p-4 rounded-md mb-6",children:[e.jsx("p",{children:"We've sent a password reset link to your email address."}),e.jsx("p",{className:"mt-2",children:"Please check your inbox and follow the instructions to reset your password."})]}),e.jsx(c,{to:"/login",className:"inline-block px-4 py-2 bg-brand-black text-brand-white font-medium rounded hover:bg-brand-gray-800 transition-colors",children:"Return to Login"})]}):e.jsxs(e.Fragment,{children:[r.form&&e.jsx("div",{className:"bg-red-50 text-red-800 p-4 rounded-md mb-6",children:r.form}),e.jsx("p",{className:"text-brand-gray-600 mb-6",children:"Enter your email address and we'll send you a link to reset your password."}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"email",className:"block text-brand-black font-medium mb-1",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",className:`w-full p-2 border ${r.email?"border-red-500":"border-brand-gray-300"} rounded focus:outline-none focus:ring-1 focus:ring-brand-black`,value:t,onChange:h,placeholder:"youremail@example.com"}),r.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]}),e.jsx("button",{type:"submit",className:`px-4 py-2 bg-brand-black text-brand-white font-medium rounded hover:bg-brand-gray-800 transition-colors w-full ${l?"opacity-75":""}`,disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin inline-block h-5 w-5 mr-3 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Reset Link"})]}),e.jsx("div",{className:"text-center mt-6",children:e.jsxs("p",{className:"text-brand-gray-600",children:["Remember your password?"," ",e.jsx(c,{to:"/login",className:"text-brand-black hover:text-brand-gray-600 border-b border-brand-gray-400 font-medium",children:"Back to Login"})]})})]})]})})})}export{S as default};
